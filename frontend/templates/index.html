<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Face Attendance System</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="navbar">
    <img src="{{ url_for('static', filename='assets/logo.png') }}" alt="Logo" class="logo">
    <nav>
      <a href="#register">Register</a>
      <a href="#attendance">Mark Attendance</a>
      <a href="#user-info">User Info</a>
    </nav>
  </header>

  <main>
    <section id="register" class="card">
      <h2>Register Student</h2>
      <form id="registerForm">
        <input type="text" name="name" placeholder="Full Name" required>
        <input type="text" name="roll" placeholder="Roll Number" required>
        <input type="text" name="course" placeholder="Course" required>
        <input type="file" name="image" accept="image/*" required>
        <button type="submit" class="button primary-button">Register Student</button>
      </form>
      <div id="registerResult"></div>
    </section>

    <section id="attendance" class="card">
      <h2>Mark Attendance</h2>
      <div id="videoBox">
        <video id="webcam" autoplay playsinline width="640" height="720"></video>
      </div>
      <canvas id="snapshot" style="display:none;"></canvas>
      <p id="para">Click the button below to start webcam and mark attendance</p>
      <div class="button-group">
        <button id="captureBtn" class="button primary-button">Start Attendance Capture</button>
      </div>
    </section>

    <section id="user-info" class="card">
      <h2>Student Information</h2>
      <form id="userInfoForm">
        <input type="text" id="nameSearch" placeholder="Enter Student Name (Optional)">
        <input type="text" id="rollSearch" placeholder="Enter Student Roll Number" required>
        <button type="submit" class="button">Search Student</button>
      </form>
      <div id="userInfoResult"></div>
      <canvas id="attendanceChart" width="200px" height="200px"></canvas>
      <button id="downloadCsvBtn" class="button primary-button" style="margin-top:1rem;">Download CSV</button>
    </section>
  </main>
  <script type="module" src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>